---
import { Image } from "astro:assets";
import { AstroFont } from "astro-font";
// import { ViewTransitions } from 'astro:transitions';
import MenuResponsive from "../components/navbar/menuResponsive.vue";
import ContactButton from "~/components/common/ContactButton.astro";
import Circular from "~/assets/img/CircularPattern.svg";

import logoCampus from "~/assets/img/logos/logoCampus_v2.svg";
import logoCampus502 from "~/assets/img/nosotros/campus502.svg";
import facebook from "~/assets/img/icons/Facebook.svg";
import instagram from "~/assets/img/icons/Instagram.svg";
import linkedin from "~/assets/img/icons/LinkedIn.svg";
import youtube from "~/assets/img/icons/YouTube.svg";

const { title, dataFooter } = Astro.props;
const currentPath = Astro.url.pathname;
const curryear = new Date().getFullYear();
---

<!doctype html>
<html lang="es" data-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Astro description" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />
    <title>{title}</title>
    <!-- <ViewTransitions /> -->
    <AstroFont
      config={[
        {
          name: "Poppins",
          src: [
            {
              style: "normal",
              weight: "400",
              path: "/public/fonts/Poppins-Regular.ttf",
            },
            {
              style: "medium",
              weight: "500",
              path: "./public/fonts/Afacad-Medium.woff2",
            },
          ],
          preload: false,
          display: "swap",
          selector: "body",
          fallback: "sans-serif",
        },
      ]}
    />
  </head>
  <body class="relative flex flex-col overflow-x-hidden gap-[5.5rem]">
    <div
      id="go-up"
      class="flex justify-center align-middle bg-primary rounded-full size-10 fixed right-10 bottom-[5%] cursor-pointer z-50"
    >
      <img src="/img/icons/arrow-up.svg" alt="" width="25" />
    </div>
    <MenuResponsive client:load>
      <Image
        slot="logo"
        src={logoCampus}
        alt="logoCampus"
        class="py-6 w-[13rem] lg:p-0 lg:w-[15rem]"
      />
      <div class="content-redirects items-center hidden md:flex h-full">
        <a
          href="/"
          aria-label="Home"
          class={currentPath === "/"
            ? "active"
            : "text-white hover:text-gray-200"}>Inicio</a
        >
        <a href="/joinUs" class={currentPath === "/joinUs" ? "active" : ""}
          >Sé un Camper</a
        >
        <a
          href="/emplea"
          aria-label="Impulsa a tu equipo"
          class={currentPath === "/emplea"
            ? "active"
            : "text-white hover:text-gray-200"}>Emplea</a
        >
        <a
          href="/patrocina"
          aria-label="Patrocina nuestros Campers"
          class={currentPath === "/patrocina"
            ? "active"
            : "text-white hover:text-gray-200"}>Patrocina</a
        >
        <a
          href="/nosotros"
          class={currentPath === "/nosotros"
            ? "active"
            : "text-white hover:text-gray-200"}>Nosotros</a
        >
        <!-- <a href="#" class={ currentPath === '#' ? 'active' : 'text-white hover:text-gray-200' }>Comunidad</a> -->
      </div>
      <div slot="menuMobile" class="md:hidden mt-5">
        <div class="flex flex-col items-center space-y-4 px-4 py-2 gap-y-3">
          <a href="/" class="text-white hover:text-gray-200">Inicio</a>
          <a href="/joinUs" class="text-white hover:text-gray-200"
            >Se un Camper</a
          >
          <a href="/emplea" class="text-white hover:text-gray-200">Emplea</a>
          <a href="/patrocina" class="text-white hover:text-gray-200"
            >Patrocina</a
          >
          <a href="/nosotros" class="text-white hover:text-gray-200">Nosotros</a
          >
        </div>
      </div>
    </MenuResponsive>
    <slot />
    <footer class="faq flex flex-col relative">
      <div
        class={`max-w-[1150px] relative sections self-center vstext my-auto flex flex-col gap-y-8 py-20`}
      >
        <p
          class="gradient-text text-lg md:text-[28px] mb-1 font-bold text-center"
        >
          {
            dataFooter
              ? dataFooter.title
              : "¿Preparado para la evolución que tu empresa necesita? Accede al talento que impulsará tu crecimiento y marcará la diferencia."
          }
        </p>
        <p class="text-white font-semibold text-center text-sm md:text-lg">
          {
            dataFooter
              ? dataFooter.content
              : "Estamos listos para ayudarte a formar un equipo que marque la diferencia. Escríbenos y descubre cómo juntos podemos crear el futuro. ¡Da el primer paso hacia un equipo imparable!"
          }
        </p>
        <ContactButton
          tipo={dataFooter ? dataFooter.buttonType : "contacto"}
          whatsApp="+50240579715"
          iconName={dataFooter ? dataFooter.buttonIcon : "happyFace.svg"}
          StylesAnchor="self-center"
        />
        <Image
          class="absolute top-[50%] translate-y-[-50%] left-[50%] translate-x-[-50%] -z-50"
          src={Circular}
          alt=""
        />
      </div>
      <div class="flex flex-col gap-y-4 px-14 pb-4">
        <div
          class="flex items-center border-b border-[transparent] md:border-white flex-col md:flex-row justify-between px-6"
        >
          <div class="text-white font-bold mb-7 md:m-0">
            <a href="/">
              <Image
                src={logoCampus502}
                alt=""
                class="py-2 w-[10rem] lg:w-[14rem]"
              />
            </a>
          </div>
          <div
            class="flex flex-col w-full gap-6 md:w-fit md:flex-row md:gap-0 items-center space-x-6"
          >
            <a
              href="/"
              aria-label="Inicio"
              class="text-white hover:text-gray-200 !mx-4">Inicio</a
            >
            <a
              href="/joinUs"
              aria-label="Impulsa a tu equipo"
              class="text-white hover:text-gray-200 !mx-4 break-keep"
              >Sé un Camper</a
            >
            <a href="/emplea" class="text-white hover:text-gray-200 !mx-4"
              >Emplea</a
            >
            <a
              href="/patrocina"
              aria-label="Patrocina nuestros Campers"
              class="text-white hover:text-gray-200 !mx-4">Patrocina</a
            >
            <a href="/nosotros" class="text-white hover:text-gray-200 !mx-4"
              >Nosotros</a
            >
          </div>
        </div>
        <div
          class="flex items-center flex-col-reverse md:flex-row justify-between px-6"
        >
          <p
            class="text-sm text-white text-center md:text-start justify-around"
          >
            © Campuslands Sociedad Anonima {curryear}. Todos los derechos
            reservados
          </p>
          <div
            class="flex items-center w-full md:w-fit justify-evenly md:gap-x-10"
          >
            <a
              href="https://www.facebook.com/share/1A7C6VczMB/"
              target="_blank"
              class="w-7 h-7 content-center place-items-center"
              ><Image src={facebook} alt="Logo facebook" /></a
            >
            <a
              href="https://www.instagram.com/campuslands502/"
              target="_blank"
              class="w-7 h-7 content-center place-items-center"
              ><Image src={instagram} alt="Logo instagram" /></a
            >
            <!-- <a
              href=""
              target="_blank"
              class="w-7 h-7 content-center place-items-center"
              ><Image src={linkedin} alt="Logo linkedin" /></a
            >
            <a
              href=""
              target="_blank"
              class="w-7 h-7 content-center place-items-center"
              ><Image src={youtube} alt="Logo youtube" /></a
            > -->
          </div>
        </div>
      </div>
    </footer>
  </body>
</html>
<script>
  function updateActiveLinks() {
    const currentPath = window.location.pathname;
    const navLinks = document.querySelectorAll(
      ".content-redirects a, .md\\:hidden a"
    );

    navLinks.forEach((link) => {
      const href = link.getAttribute("href");
      if (href === currentPath) {
        link.classList.add("active");
        link.classList.remove("text-white", "hover:text-gray-200");
      } else {
        link.classList.remove("active");
        link.classList.add("text-white", "hover:text-gray-200");
      }
    });
  }

  // Actualizar al cargar la página
  document.addEventListener("DOMContentLoaded", updateActiveLinks);

  // Actualizar cuando cambie la URL (para navegación del lado del cliente)
  document.addEventListener("astro:page-load", updateActiveLinks);

  // Mantener la función goUp existente
  function goUp() {
    window.scrollTo({ top: 0, behavior: "smooth" });
  }

  document.querySelector("#go-up").addEventListener("click", goUp);
</script>
<style is:global>
  nav.navbar {
    animation: bgHeader auto linear both;
    animation-timeline: scroll();
    animation-range: 0 200px;
    .content-redirects {
      a {
        line-height: 3;
        height: 100%;
        display: flex;
        align-items: center;
        padding: 1.1rem 0.9rem 1.1rem 0.9rem;
        font-weight: 600;
      }
      a.active {
        color: #02d9a4;
        border-bottom: 3px solid #02d9a4;
      }
    }
  }

  .glass {
    background: rgba(255, 255, 255, 0);
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);
  }

  :root {
    --accent: 136, 58, 234;
    --accent-light: 224, 204, 250;
    --accent-dark: 49, 10, 101;
    --accent-gradient: linear-gradient(
      45deg,
      rgb(var(--accent)),
      rgb(var(--accent-light)) 30%,
      white 60%
    );
  }
  html {
    font-family: "Poppins", sans-serif;
    font-weight: 400;
    background-color: red;
  }
  code {
    font-family:
      Menlo,
      Monaco,
      Lucida Console,
      Liberation Mono,
      DejaVu Sans Mono,
      Bitstream Vera Sans Mono,
      Courier New,
      monospace;
  }
</style>
